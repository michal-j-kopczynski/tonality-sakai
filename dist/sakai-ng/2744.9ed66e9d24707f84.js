"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[2744],{7852:(A,m,o)=>{o.d(m,{Q:()=>t});var c=o(5619),p=o(9467);let t=(()=>{class a{constructor(){this.seconds=0,this.messageSource=new c.X(this.seconds),this.currentMessage=this.messageSource.asObservable()}changeSecond(u){this.seconds=u,this.messageSource.next(u)}static#t=this.\u0275fac=function(s){return new(s||a)};static#e=this.\u0275prov=p.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},1782:(A,m,o)=>{o.d(m,{w:()=>r});var c=o(6814),p=o(707),t=o(4480),a=o(9467);let r=(()=>{class u{static#t=this.\u0275fac=function(h){return new(h||u)};static#e=this.\u0275mod=a.oAB({type:u});static#i=this.\u0275inj=a.cJS({imports:[p.hJ,t.T,c.ez]})}return u})()},4027:(A,m,o)=>{o.r(m),o.d(m,{FileListModule:()=>P});var c=o(6814),p=o(2549),t=o(9467),a=o(6739),r=o(9552),u=o(5219),s=o(707),d=o(4480),h=o(3530),T=o(8831),F=o(1230);function v(n,f){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",20),t._uU(4,"File "),t._UZ(5,"p-sortIcon",21),t.qZA(),t.TgZ(6,"th",22),t._uU(7,"Uploaded At "),t._UZ(8,"p-sortIcon",23),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Action"),t.qZA()())}function C(n,f){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",24)(9,"button",25),t.NdJ("click",function(){const _=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.playAudio(_))}),t.qZA(),t.TgZ(10,"button",26),t.NdJ("click",function(){const _=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.deleteAudioFile(_.file))}),t.qZA()()()()}if(2&n){const e=f.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(i.extractFileName(e.file)),t.xp6(2),t.Oqu(e.uploaded_at)}}function Z(n,f){if(1&n){const e=t.EpF();t.TgZ(0,"div",27)(1,"label",28),t._uU(2,"File Name"),t.qZA(),t.TgZ(3,"input",29),t.NdJ("ngModelChange",function(l){t.CHM(e);const _=t.oxw();return t.KtG(_.selectedAudioFile.file=l)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.selectedAudioFile.file)}}function b(n,f){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.hideEditDialog())}),t.qZA(),t.TgZ(1,"button",31),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.saveAudioFile())}),t.qZA()}}function x(n,f){if(1&n&&t._UZ(0,"app-audio-player",32),2&n){const e=t.oxw();t.Q6J("audioUrl",e.getAudioUrl())}}function U(n,f){if(1&n){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.hidePlayDialog())}),t.qZA()}}const L=()=>[10,20,30],y=()=>({width:"450px"});let D=(()=>{class n{constructor(e){this.userFileService=e,this.audioFiles=[],this.filteredAudioFiles=[],this.editDialogVisible=!1,this.playDialogVisible=!1}ngOnInit(){this.fetchAudioFiles()}fetchAudioFiles(){this.userFileService.getFileList().subscribe(e=>{this.audioFiles=e,this.filteredAudioFiles=e},e=>{console.error("Error fetching audio files:",e)})}extractFileName(e){const i=e.split("/");return i[i.length-1]}onGlobalFilter(e){e=e.trim().toLowerCase(),this.filteredAudioFiles=this.audioFiles.filter(i=>i.id.toString().toLowerCase().includes(e)||i.user.toLowerCase().includes(e)||i.file.toLowerCase().includes(e)||i.uploaded_at.toLowerCase().includes(e))}deleteAudioFile(e){this.userFileService.deleteFileByName(e).subscribe(()=>{this.audioFiles=this.audioFiles.filter(i=>i.file!==e),this.filteredAudioFiles=this.filteredAudioFiles.filter(i=>i.file!==e)},i=>{console.error("Error deleting audio file:",i)})}playAudio(e){this.selectedAudioFile=e,this.playDialogVisible=!0}hidePlayDialog(){this.playDialogVisible=!1}editAudioFile(e){this.selectedAudioFile=e,this.editDialogVisible=!0}hideEditDialog(){this.editDialogVisible=!1}getAudioUrl(){return this.extractFileName(this.selectedAudioFile.file)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(a.B))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-file-list"]],decls:33,vars:14,consts:[[1,"card"],["header","User Uploaded Audio Files",1,"line-height-3","m-0",3,"toggleable"],[2,"font-size","1.2rem"],[1,"flex","justify-content-center","md:justify-content-end"],["src","assets/graphics/Video files-pana.svg","alt","Audio files image",1,"w-3"],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center","mb-4"],[1,"m-0"],[1,"flex","items-center"],[1,"pi","pi-search","mr-1"],["pInputText","","type","text","placeholder","Search...",1,"w-full","lg:w-96",3,"input"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["header","Product Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Play Audio",1,"p-fluid",3,"visible","modal","visibleChange"],["pSortableColumn","file"],["field","file"],["pSortableColumn","uploaded_at"],["field","uploaded_at"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-play",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[1,"field"],["for","fileName"],["type","text","pInputText","","id","fileName","required","","autofocus","",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],[3,"audioUrl"],["pButton","","pRipple","","label","Close","icon","pi pi-times",1,"p-button-text",3,"click"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0)(1,"p-panel",1)(2,"p",2),t._uU(3,"View, listen, and manage your uploaded audio files:"),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"img",4),t.qZA(),t.TgZ(6,"ul",2)(7,"li")(8,"strong"),t._uU(9,"View & Listen:"),t.qZA(),t._uU(10," Browse through the list of user-uploaded audio files and listen to them directly from the interface."),t.qZA(),t.TgZ(11,"li")(12,"strong"),t._uU(13,"Delete Files:"),t.qZA(),t._uU(14," Remove unwanted audio files from the list to keep your storage organized and clutter-free."),t.qZA()()()(),t.TgZ(15,"div",5)(16,"div",6)(17,"div",7)(18,"div",8)(19,"h5",9),t._uU(20,"User Audio Files"),t.qZA(),t.TgZ(21,"span",10),t._UZ(22,"i",11),t.TgZ(23,"input",12),t.NdJ("input",function(g){return l.onGlobalFilter(g.target.value)}),t.qZA()()(),t.TgZ(24,"p-table",13),t.YNc(25,v,11,0,"ng-template",14)(26,C,11,3,"ng-template",15),t.qZA(),t.TgZ(27,"p-dialog",16),t.NdJ("visibleChange",function(g){return l.editDialogVisible=g}),t.YNc(28,Z,4,1,"ng-template",17)(29,b,2,0,"ng-template",18),t.qZA(),t.TgZ(30,"p-dialog",19),t.NdJ("visibleChange",function(g){return l.playDialogVisible=g}),t.YNc(31,x,1,1,"ng-template",17)(32,U,1,0,"ng-template",18),t.qZA()()()()),2&i&&(t.xp6(1),t.Q6J("toggleable",!0),t.xp6(23),t.Q6J("value",l.filteredAudioFiles)("rows",10)("paginator",!0)("rowsPerPageOptions",t.DdM(12,L))("showCurrentPageReport",!0),t.xp6(3),t.Akn(t.DdM(13,y)),t.Q6J("visible",l.editDialogVisible)("modal",!0),t.xp6(3),t.Q6J("visible",l.playDialogVisible)("modal",!0))},dependencies:[r.iA,u.jx,r.lQ,r.fz,s.Hq,d.H,h.V,T.N,F.s],encapsulation:2})}return n})(),E=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[p.Bz.forChild([{path:"",component:D}]),p.Bz]})}return n})();var M=o(1782);let P=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({providers:[a.B],imports:[c.ez,E,r.U$,s.hJ,d.T,h.S,M.w,F.Q]})}return n})()},6739:(A,m,o)=>{o.d(m,{B:()=>a});var c=o(553),p=o(9467),t=o(9862);let a=(()=>{class r{constructor(s){this.http=s,this.apiUrl=`http://${c.N.urls.backendURL}/api/get_user_audio_files/`,this.deleteUrl=`http://${c.N.urls.backendURL}/api/delete_file/`,c.N.production?console.log("Running in production mode"):console.log("Running in development mode")}getFileList(){const s=localStorage.getItem("authToken");if(!s)throw new Error("No authentication token available.");return this.http.get(this.apiUrl,{headers:{Authorization:`Token ${s}`}})}deleteFileByName(s){const d=localStorage.getItem("authToken");if(!d)throw new Error("No authentication token available.");const h={Authorization:`Token ${d}`},F=`${this.deleteUrl}?filename=${encodeURIComponent(s)}`;return this.http.delete(F,{headers:h})}getAudioFile(s){return this.http.get(`http://${c.N.urls.backendURL}/api/get_audio_file/${s}`,{responseType:"blob"})}static#t=this.\u0275fac=function(d){return new(d||r)(p.LFG(t.eN))};static#e=this.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()}}]);