"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[4027],{4027:(J,c,n)=>{n.r(c),n.d(c,{FileListModule:()=>N});var h=n(6814),d=n(2549),t=n(9467),u=n(6739),r=n(9552),f=n(5219),m=n(707),g=n(4480),_=n(3530),F=n(8831);function C(l,p){1&l&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",15),t._uU(4,"File "),t._UZ(5,"p-sortIcon",16),t.qZA(),t.TgZ(6,"th",17),t._uU(7,"Uploaded At "),t._UZ(8,"p-sortIcon",18),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Action"),t.qZA()())}function A(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",19)(9,"button",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.playAudio(a))}),t.qZA(),t.TgZ(10,"button",21),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.deleteAudioFile(a.file))}),t.qZA()()()()}if(2&l){const e=p.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(i.extractFileName(e.file)),t.xp6(2),t.Oqu(e.uploaded_at)}}function x(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"div",22)(1,"label",23),t._uU(2,"File Name"),t.qZA(),t.TgZ(3,"input",24),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedAudioFile.file=o)}),t.qZA()()}if(2&l){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.selectedAudioFile.file)}}function b(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.hideEditDialog())}),t.qZA(),t.TgZ(1,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveAudioFile())}),t.qZA()}}function T(l,p){if(1&l&&t._UZ(0,"app-audio-player",27),2&l){const e=t.oxw();t.Q6J("audioUrl",e.getAudioUrl())}}function Z(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.hidePlayDialog())}),t.qZA()}}const v=()=>[10,20,30],L=()=>({width:"450px"}),y=()=>({width:"80vh","max-height":"80vh"});let w=(()=>{class l{constructor(e){this.userFileService=e,this.audioFiles=[],this.filteredAudioFiles=[],this.editDialogVisible=!1,this.playDialogVisible=!1}ngOnInit(){this.fetchAudioFiles()}fetchAudioFiles(){this.userFileService.getFileList().subscribe(e=>{this.audioFiles=e,this.filteredAudioFiles=e},e=>{console.error("Error fetching audio files:",e)})}extractFileName(e){const i=e.split("/");return i[i.length-1]}onGlobalFilter(e){e=e.trim().toLowerCase(),this.filteredAudioFiles=this.audioFiles.filter(i=>i.id.toString().toLowerCase().includes(e)||i.user.toLowerCase().includes(e)||i.file.toLowerCase().includes(e)||i.uploaded_at.toLowerCase().includes(e))}deleteAudioFile(e){this.userFileService.deleteFileByName(e).subscribe(()=>{this.audioFiles=this.audioFiles.filter(i=>i.file!==e),this.filteredAudioFiles=this.filteredAudioFiles.filter(i=>i.file!==e)},i=>{console.error("Error deleting audio file:",i)})}playAudio(e){this.selectedAudioFile=e,this.playDialogVisible=!0}hidePlayDialog(){this.playDialogVisible=!1}editAudioFile(e){this.selectedAudioFile=e,this.editDialogVisible=!0}hideEditDialog(){this.editDialogVisible=!1}getAudioUrl(){return this.extractFileName(this.selectedAudioFile.file)}static#t=this.\u0275fac=function(i){return new(i||l)(t.Y36(u.B))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-file-list"]],decls:18,vars:16,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center","mb-4"],[1,"m-0"],[1,"flex","items-center"],[1,"pi","pi-search","mr-1"],["pInputText","","type","text","placeholder","Search...",1,"w-full","lg:w-96",3,"input"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["header","Product Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Play Audio",1,"p-fluid",3,"visible","modal","visibleChange"],["pSortableColumn","file"],["field","file"],["pSortableColumn","uploaded_at"],["field","uploaded_at"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-play",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[1,"field"],["for","fileName"],["type","text","pInputText","","id","fileName","required","","autofocus","",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],[3,"audioUrl"],["pButton","","pRipple","","label","Close","icon","pi pi-times",1,"p-button-text",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"User Audio Files"),t.qZA(),t.TgZ(6,"span",5),t._UZ(7,"i",6),t.TgZ(8,"input",7),t.NdJ("input",function(s){return o.onGlobalFilter(s.target.value)}),t.qZA()()(),t.TgZ(9,"p-table",8),t.YNc(10,C,11,0,"ng-template",9)(11,A,11,3,"ng-template",10),t.qZA(),t.TgZ(12,"p-dialog",11),t.NdJ("visibleChange",function(s){return o.editDialogVisible=s}),t.YNc(13,x,4,1,"ng-template",12)(14,b,2,0,"ng-template",13),t.qZA(),t.TgZ(15,"p-dialog",14),t.NdJ("visibleChange",function(s){return o.playDialogVisible=s}),t.YNc(16,T,1,1,"ng-template",12)(17,Z,1,0,"ng-template",13),t.qZA()()()()),2&i&&(t.xp6(9),t.Q6J("value",o.filteredAudioFiles)("rows",10)("paginator",!0)("rowsPerPageOptions",t.DdM(13,v))("showCurrentPageReport",!0),t.xp6(3),t.Akn(t.DdM(14,L)),t.Q6J("visible",o.editDialogVisible)("modal",!0),t.xp6(3),t.Akn(t.DdM(15,y)),t.Q6J("visible",o.playDialogVisible)("modal",!0))},dependencies:[r.iA,f.jx,r.lQ,r.fz,m.Hq,g.H,_.V,F.N],encapsulation:2})}return l})(),U=(()=>{class l{static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275mod=t.oAB({type:l});static#i=this.\u0275inj=t.cJS({imports:[d.Bz.forChild([{path:"",component:w}]),d.Bz]})}return l})();var D=n(1782);let N=(()=>{class l{static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275mod=t.oAB({type:l});static#i=this.\u0275inj=t.cJS({providers:[u.B],imports:[h.ez,U,r.U$,m.hJ,g.T,_.S,D.w]})}return l})()}}]);