"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[2729],{1782:(y,p,e)=>{e.d(p,{w:()=>h});var g=e(6814),c=e(9467);let h=(()=>{class t{static#t=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275mod=c.oAB({type:t});static#o=this.\u0275inj=c.cJS({imports:[g.ez]})}return t})()},2729:(y,p,e)=>{e.r(p),e.d(p,{RemotetransModule:()=>O});var g=e(6814),c=e(2549),h=e(5219),t=e(9467),d=e(6739),f=e(9862);let i=(()=>{class o{constructor(r){this.http=r,this.apiUrl="http://3.123.146.102:80/api/generate_transcription_remote_url/"}generateRemoteTranscription(r,n,s){const l=localStorage.getItem("authToken");if(!l)throw new Error("No authentication token available.");const m=new f.WM({Authorization:`token ${l}`});return this.http.post(this.apiUrl,{remoteurl:r,trans_name:n,language:s},{headers:m})}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(f.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var u=e(615),v=e(707),T=e(4480),a=e(95),M=e(4104),C=e(3714),R=e(3965);let E=(()=>{class o{constructor(r,n,s,l){this.userFileService=r,this.transcriptionService=n,this.taskService=s,this.service=l,this.transData=[],this.filteredTransData=[],this.editDialogVisible=!1,this.playDialogVisible=!1,this.selectedAudioFileName="",this.transcriptionName="",this.items=[],this.cardMenu=[],this.msgs=[],this.languageOptions=["pl","en"],this.remote_url="",this.selectedTranscription=""}generateRemoteTranscription(r){this.remote_url&&r?(console.error(this.remote_url),this.showInfoViaToast(),this.transcriptionService.generateRemoteTranscription(this.remote_url,r,this.selectedLanguage).subscribe(n=>{console.log("Transcription generated successfully:",n),this.taskService.setTaskId(n.task_id),console.log(this.taskService.taskId),this.taskService.pollTaskStatus().subscribe(s=>{console.log("Task status response:",s),"completed"==s.status&&(console.log("Loading message popup..."),this.showSuccessViaToast())},s=>{console.error("Error polling task status:",s)})},n=>{console.error("Error generating transcription:",n)})):(console.error("No audio file selected or transcription name is empty"),this.showErrorViaToast())}showInfoViaToast(){this.service.add({key:"tst",severity:"info",summary:"Info Message",detail:"Your transrciption is being processed...",life:6500})}showErrorViaToast(){this.service.add({key:"tst",severity:"error",summary:"Error Message",detail:"No audio file selected or transcription name is empty",life:6500})}showSuccessViaToast(){this.service.add({key:"tst",severity:"success",summary:"Success Message",detail:"Your transcription is ready!",life:6500})}showSuccessViaToastUpload(){this.service.add({key:"tst",severity:"success",summary:"Success Message",detail:"Your file has been succesfully added",life:6500})}showWarnViaToast(){this.service.add({key:"tst",severity:"warn",summary:"Warn Message",detail:"Succesfully deleted transcription"})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(d.B),t.Y36(i),t.Y36(u.M),t.Y36(h.ez))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-remotetrans"]],features:[t._Bn([h.ez])],decls:19,vars:6,consts:[[1,"card"],[3,"ngSubmit"],["transcriptionForm","ngForm"],[1,"col-12","mb-2",2,"width","100%"],["type","text","pInputText","","placeholder","url of the audio you want to transribe","name","r_url","required","",2,"width","800px",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-12","mb-2","lg:col-4","lg:mb-0"],["name","selectedLanguage","placeholder","Select the language used in the audio","ngModel","","required","",3,"options","ngModel","showClear","ngModelChange"],["selectedLanguageModel","ngModel"],["type","text","pInputText","","placeholder","Name of the transcription","name","transcriptionName","required","",3,"ngModel","ngModelChange"],["transcriptionNameModel","ngModel"],["type","submit","pButton","","pRipple","",3,"disabled"],["key","tst"]],template:function(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1,"Remote URL transcription service"),t.qZA(),t.TgZ(2,"div",0)(3,"h5"),t._uU(4,"Generate transcription from remote URL (youtube)"),t.qZA(),t.TgZ(5,"form",1,2),t.NdJ("ngSubmit",function(){return s.generateRemoteTranscription(s.transcriptionName)}),t.TgZ(7,"div",3)(8,"input",4),t.NdJ("ngModelChange",function(m){return s.remote_url=m}),t.qZA()(),t.TgZ(9,"div",5)(10,"div",6)(11,"p-dropdown",7,8),t.NdJ("ngModelChange",function(m){return s.selectedLanguage=m}),t.qZA()()(),t.TgZ(13,"div",6)(14,"input",9,10),t.NdJ("ngModelChange",function(m){return s.transcriptionName=m}),t.qZA()(),t.TgZ(16,"button",11),t._uU(17,"Generate"),t.qZA()()(),t._UZ(18,"p-toast",12)),2&n){const l=t.MAs(6);t.xp6(8),t.Q6J("ngModel",s.remote_url),t.xp6(3),t.Q6J("options",s.languageOptions)("ngModel",s.selectedLanguage)("showClear",!0),t.xp6(3),t.Q6J("ngModel",s.transcriptionName),t.xp6(2),t.Q6J("disabled",!l.valid)}},dependencies:[v.Hq,T.H,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F,M.FN,C.o,R.Lt],encapsulation:2})}return o})(),S=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[c.Bz.forChild([{path:"",component:E}]),c.Bz]})}return o})();var N=e(9552),A=e(3530),U=e(1782),F=e(1122),L=e(1230),I=e(9502),B=e(7161),J=e(3722);let O=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[d.B,h.ez],imports:[g.ez,S,N.U$,v.hJ,T.T,A.S,U.w,a.u5,F.$9,L.Q,I.$,B.O,M.EV,C.j,J.O,R.kW]})}return o})()},6739:(y,p,e)=>{e.d(p,{B:()=>t});var g=e(553),c=e(9467),h=e(9862);let t=(()=>{class d{constructor(i){this.http=i,this.apiUrl=`http://${g.N.urls.backendURL}/api/get_user_audio_files/`,this.deleteUrl="http://3.123.146.102:80/api/delete_file/",g.N.production?console.log("Running in production mode"):console.log("Running in development mode")}getFileList(){const i=localStorage.getItem("authToken");if(!i)throw new Error("No authentication token available.");return this.http.get(this.apiUrl,{headers:{Authorization:`Token ${i}`}})}deleteFileByName(i){const u=localStorage.getItem("authToken");if(!u)throw new Error("No authentication token available.");const v={Authorization:`Token ${u}`},a=`${this.deleteUrl}?filename=${encodeURIComponent(i)}`;return this.http.delete(a,{headers:v})}getAudioFile(i){return this.http.get(`http://3.123.146.102:80/api/get_audio_file/${i}`,{responseType:"blob"})}static#t=this.\u0275fac=function(u){return new(u||d)(c.LFG(h.eN))};static#e=this.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);