"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[2729],{1782:(M,g,e)=>{e.d(g,{w:()=>m});var l=e(6814),c=e(9467);let m=(()=>{class t{static#t=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275mod=c.oAB({type:t});static#n=this.\u0275inj=c.cJS({imports:[l.ez]})}return t})()},2729:(M,g,e)=>{e.r(g),e.d(g,{RemotetransModule:()=>O});var l=e(6814),c=e(2549),m=e(5219),t=e(9467),d=e(6739),f=e(9862),i=e(553);let u=(()=>{class n{constructor(r){this.http=r,this.apiUrl=`http://${i.N.urls.backendURL}/api/generate_transcription_remote_url/`}generateRemoteTranscription(r,o,s){const a=localStorage.getItem("authToken");if(!a)throw new Error("No authentication token available.");const p=new f.WM({Authorization:`token ${a}`});return this.http.post(this.apiUrl,{remoteurl:r,trans_name:o,language:s},{headers:p})}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(f.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var T=e(615),y=e(707),v=e(4480),h=e(95),R=e(4104),C=e(3714),N=e(3965);let E=(()=>{class n{constructor(r,o,s,a){this.userFileService=r,this.transcriptionService=o,this.taskService=s,this.service=a,this.transData=[],this.filteredTransData=[],this.editDialogVisible=!1,this.playDialogVisible=!1,this.selectedAudioFileName="",this.transcriptionName="",this.items=[],this.cardMenu=[],this.msgs=[],this.languageOptions=["pl","en"],this.remote_url="",this.selectedTranscription=""}generateRemoteTranscription(r){this.remote_url&&r?(console.error(this.remote_url),this.showInfoViaToast(),this.transcriptionService.generateRemoteTranscription(this.remote_url,r,this.selectedLanguage).subscribe(o=>{console.log("Transcription generated successfully:",o),this.taskService.setTaskId(o.task_id),console.log(this.taskService.taskId),this.taskService.pollTaskStatus().subscribe(s=>{console.log("Task status response:",s),"completed"==s.status&&(console.log("Loading message popup..."),this.showSuccessViaToast())},s=>{console.error("Error polling task status:",s)})},o=>{console.error("Error generating transcription:",o)})):(console.error("No audio file selected or transcription name is empty"),this.showErrorViaToast())}showInfoViaToast(){this.service.add({key:"tst",severity:"info",summary:"Info Message",detail:"Your transrciption is being processed...",life:6500})}showErrorViaToast(){this.service.add({key:"tst",severity:"error",summary:"Error Message",detail:"No audio file selected or transcription name is empty",life:6500})}showSuccessViaToast(){this.service.add({key:"tst",severity:"success",summary:"Success Message",detail:"Your transcription is ready!",life:6500})}showSuccessViaToastUpload(){this.service.add({key:"tst",severity:"success",summary:"Success Message",detail:"Your file has been succesfully added",life:6500})}showWarnViaToast(){this.service.add({key:"tst",severity:"warn",summary:"Warn Message",detail:"Succesfully deleted transcription"})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(d.B),t.Y36(u),t.Y36(T.M),t.Y36(m.ez))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-remotetrans"]],features:[t._Bn([m.ez])],decls:19,vars:6,consts:[[1,"card"],[3,"ngSubmit"],["transcriptionForm","ngForm"],[1,"col-12","mb-2",2,"width","100%"],["type","text","pInputText","","placeholder","url of the audio you want to transribe","name","r_url","required","",2,"width","800px",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-12","mb-2","lg:col-4","lg:mb-0"],["name","selectedLanguage","placeholder","Select the language used in the audio","ngModel","","required","",3,"options","ngModel","showClear","ngModelChange"],["selectedLanguageModel","ngModel"],["type","text","pInputText","","placeholder","Name of the transcription","name","transcriptionName","required","",3,"ngModel","ngModelChange"],["transcriptionNameModel","ngModel"],["type","submit","pButton","","pRipple","",3,"disabled"],["key","tst"]],template:function(o,s){if(1&o&&(t.TgZ(0,"p"),t._uU(1,"Remote URL transcription service"),t.qZA(),t.TgZ(2,"div",0)(3,"h5"),t._uU(4,"Generate transcription from remote URL (youtube)"),t.qZA(),t.TgZ(5,"form",1,2),t.NdJ("ngSubmit",function(){return s.generateRemoteTranscription(s.transcriptionName)}),t.TgZ(7,"div",3)(8,"input",4),t.NdJ("ngModelChange",function(p){return s.remote_url=p}),t.qZA()(),t.TgZ(9,"div",5)(10,"div",6)(11,"p-dropdown",7,8),t.NdJ("ngModelChange",function(p){return s.selectedLanguage=p}),t.qZA()()(),t.TgZ(13,"div",6)(14,"input",9,10),t.NdJ("ngModelChange",function(p){return s.transcriptionName=p}),t.qZA()(),t.TgZ(16,"button",11),t._uU(17,"Generate"),t.qZA()()(),t._UZ(18,"p-toast",12)),2&o){const a=t.MAs(6);t.xp6(8),t.Q6J("ngModel",s.remote_url),t.xp6(3),t.Q6J("options",s.languageOptions)("ngModel",s.selectedLanguage)("showClear",!0),t.xp6(3),t.Q6J("ngModel",s.transcriptionName),t.xp6(2),t.Q6J("disabled",!a.valid)}},dependencies:[y.Hq,v.H,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.On,h.F,R.FN,C.o,N.Lt],encapsulation:2})}return n})(),S=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[c.Bz.forChild([{path:"",component:E}]),c.Bz]})}return n})();var U=e(9552),L=e(3530),A=e(1782),F=e(1122),I=e(1230),B=e(9502),k=e(7161),J=e(3722);let O=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[d.B,m.ez],imports:[l.ez,S,U.U$,y.hJ,v.T,L.S,A.w,h.u5,F.$9,I.Q,B.$,k.O,R.EV,C.j,J.O,N.kW]})}return n})()},6739:(M,g,e)=>{e.d(g,{B:()=>t});var l=e(553),c=e(9467),m=e(9862);let t=(()=>{class d{constructor(i){this.http=i,this.apiUrl=`http://${l.N.urls.backendURL}/api/get_user_audio_files/`,this.deleteUrl=`http://${l.N.urls.backendURL}/api/delete_file/`,l.N.production?console.log("Running in production mode"):console.log("Running in development mode")}getFileList(){const i=localStorage.getItem("authToken");if(!i)throw new Error("No authentication token available.");return this.http.get(this.apiUrl,{headers:{Authorization:`Token ${i}`}})}deleteFileByName(i){const u=localStorage.getItem("authToken");if(!u)throw new Error("No authentication token available.");const T={Authorization:`Token ${u}`},v=`${this.deleteUrl}?filename=${encodeURIComponent(i)}`;return this.http.delete(v,{headers:T})}getAudioFile(i){return this.http.get(`http://${l.N.urls.backendURL}/api/get_audio_file/${i}`,{responseType:"blob"})}static#t=this.\u0275fac=function(u){return new(u||d)(c.LFG(m.eN))};static#e=this.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);